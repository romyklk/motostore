{% extends 'base.html.twig' %}

{% block title %}
	{{ parent() }}
	-
	{{ ad.title }}
{% endblock %}


{% block body %}

	{% set price = ad.price / 100 %}

	{% set mainPicture = asset('uploads/ads/' ~ ad.mainPicture) %}

	{% set randomNumber = random(41, 50) / 10 %}
	{% set randomNumber = (random(41, 50) / 10)|number_format(1, '.', '') %}


	<div class="mb-1 w-full">
		<div class="bg-white px-4 py-2 shadow-1 dark:border-dark-3 dark:bg-dark-2 dark:shadow-card sm:px-6 md:px-8 md:py-2">
			<ul class="flex items-center">
				<li class="flex items-center">
					<a href="{{path('app_home')}}" class="text-base font-bold text-[#1f2641] hover:text-[#f75842]">
						Accueil
					</a>
					<span class="px-3 text-body-color dark:text-dark-6">
						<svg width="7" height="12" viewbox="0 0 7 12" class="fill-current">
							<path d="M0.879233 11.4351C0.808625 11.4351 0.720364 11.3998 0.667408 11.3469C0.543844 11.2233 0.543844 11.0291 0.649756 10.9056L5.09807 6.17483C5.18633 6.08657 5.18633 5.92771 5.09807 5.82179L0.649756 1.09105C0.526192 0.967487 0.543844 0.773315 0.667408 0.649751C0.790972 0.526187 0.985145 0.543839 1.10871 0.667403L5.55702 5.39815C5.85711 5.73353 5.85711 6.26309 5.55702 6.58083L1.10871 11.3292C1.0381 11.3998 0.967493 11.4351 0.879233 11.4351Z"/>
							<path fill-rule="evenodd" clip-rule="evenodd" d="M0.229332 10.5281L4.48868 5.99831L0.24288 1.48294C-0.133119 1.09849 -0.0312785 0.549591 0.267983 0.25033C0.652758 -0.134445 1.2069 -0.0332381 1.50812 0.267982L1.52041 0.280272L5.9781 5.02138C6.46442 5.56491 6.47872 6.42661 5.96853 6.96778V6.96778L1.50834 11.7289C1.36051 11.8767 1.15353 12 0.879227 12C0.660517 12 0.428074 11.9064 0.267983 11.7463C-0.0719543 11.4064 -0.0699959 10.8773 0.220873 10.538L0.229332 10.5281ZM5.55702 6.58083C5.85711 6.26309 5.85711 5.73353 5.55702 5.39815L1.10871 0.667403C0.985145 0.543839 0.790972 0.526187 0.667408 0.649751C0.543844 0.773315 0.526192 0.967487 0.649756 1.09105L5.09807 5.82179C5.18633 5.92771 5.18633 6.08657 5.09807 6.17483L0.649756 10.9056C0.543844 11.0291 0.543844 11.2233 0.667408 11.3469C0.720364 11.3998 0.808625 11.4351 0.879233 11.4351C0.967493 11.4351 1.0381 11.3998 1.10871 11.3292L5.55702 6.58083Z"/>
						</svg>
					</span>
				</li>
				<li class="flex items-center">
					<a href="{{path('app_ad')}}" class="text-base font-bold text-[#1f2641] hover:text-[#f75842]">
						Annonces
					</a>
					<span class="px-3 text-body-color dark:text-dark-6">
						<svg width="7" height="12" viewbox="0 0 7 12" class="fill-current">
							<path d="M0.879233 11.4351C0.808625 11.4351 0.720364 11.3998 0.667408 11.3469C0.543844 11.2233 0.543844 11.0291 0.649756 10.9056L5.09807 6.17483C5.18633 6.08657 5.18633 5.92771 5.09807 5.82179L0.649756 1.09105C0.526192 0.967487 0.543844 0.773315 0.667408 0.649751C0.790972 0.526187 0.985145 0.543839 1.10871 0.667403L5.55702 5.39815C5.85711 5.73353 5.85711 6.26309 5.55702 6.58083L1.10871 11.3292C1.0381 11.3998 0.967493 11.4351 0.879233 11.4351Z"/>
							<path fill-rule="evenodd" clip-rule="evenodd" d="M0.229332 10.5281L4.48868 5.99831L0.24288 1.48294C-0.133119 1.09849 -0.0312785 0.549591 0.267983 0.25033C0.652758 -0.134445 1.2069 -0.0332381 1.50812 0.267982L1.52041 0.280272L5.9781 5.02138C6.46442 5.56491 6.47872 6.42661 5.96853 6.96778V6.96778L1.50834 11.7289C1.36051 11.8767 1.15353 12 0.879227 12C0.660517 12 0.428074 11.9064 0.267983 11.7463C-0.0719543 11.4064 -0.0699959 10.8773 0.220873 10.538L0.229332 10.5281ZM5.55702 6.58083C5.85711 6.26309 5.85711 5.73353 5.55702 5.39815L1.10871 0.667403C0.985145 0.543839 0.790972 0.526187 0.667408 0.649751C0.543844 0.773315 0.526192 0.967487 0.649756 1.09105L5.09807 5.82179C5.18633 5.92771 5.18633 6.08657 5.09807 6.17483L0.649756 10.9056C0.543844 11.0291 0.543844 11.2233 0.667408 11.3469C0.720364 11.3998 0.808625 11.4351 0.879233 11.4351C0.967493 11.4351 1.0381 11.3998 1.10871 11.3292L5.55702 6.58083Z"/>
						</svg>
					</span>
				</li>

				<li class="flex items-center">
<a href="{{path('app_mark_show',{'slug':ad.mark.name})}}" class="text-base font-bold text-[#1f2641] hover:text-[#f75842]">



						{{ ad.mark.name }}
					</a>
					<span class="px-3 text-body-color dark:text-dark-6">
						<svg width="7" height="12" viewbox="0 0 7 12" class="fill-current">
							<path d="M0.879233 11.4351C0.808625 11.4351 0.720364 11.3998 0.667408 11.3469C0.543844 11.2233 0.543844 11.0291 0.649756 10.9056L5.09807 6.17483C5.18633 6.08657 5.18633 5.92771 5.09807 5.82179L0.649756 1.09105C0.526192 0.967487 0.543844 0.773315 0.667408 0.649751C0.790972 0.526187 0.985145 0.543839 1.10871 0.667403L5.55702 5.39815C5.85711 5.73353 5.85711 6.26309 5.55702 6.58083L1.10871 11.3292C1.0381 11.3998 0.967493 11.4351 0.879233 11.4351Z"/>
							<path fill-rule="evenodd" clip-rule="evenodd" d="M0.229332 10.5281L4.48868 5.99831L0.24288 1.48294C-0.133119 1.09849 -0.0312785 0.549591 0.267983 0.25033C0.652758 -0.134445 1.2069 -0.0332381 1.50812 0.267982L1.52041 0.280272L5.9781 5.02138C6.46442 5.56491 6.47872 6.42661 5.96853 6.96778V6.96778L1.50834 11.7289C1.36051 11.8767 1.15353 12 0.879227 12C0.660517 12 0.428074 11.9064 0.267983 11.7463C-0.0719543 11.4064 -0.0699959 10.8773 0.220873 10.538L0.229332 10.5281ZM5.55702 6.58083C5.85711 6.26309 5.85711 5.73353 5.55702 5.39815L1.10871 0.667403C0.985145 0.543839 0.790972 0.526187 0.667408 0.649751C0.543844 0.773315 0.526192 0.967487 0.649756 1.09105L5.09807 5.82179C5.18633 5.92771 5.18633 6.08657 5.09807 6.17483L0.649756 10.9056C0.543844 11.0291 0.543844 11.2233 0.667408 11.3469C0.720364 11.3998 0.808625 11.4351 0.879233 11.4351C0.967493 11.4351 1.0381 11.3998 1.10871 11.3292L5.55702 6.58083Z"/>
						</svg>
					</span>
				</li>
				<li class="text-base font-bold text-[#00bf8e] hover:text-[#00bf8e]">


					{{ ad.title }}
				</li>
			</ul>
		</div>
	</div>


	<style>
		.swiper-button-next::after,
		.swiper-button-prev::after {
			font-size: 20px; /* Ajustez la taille de la police ici */
			width: 20px;
			height: 20px;
		}

		.nav-for-slider .swiper-slide {
			height: auto;
			width: auto;
			cursor: pointer;
		}

		.swiper-wrapper {
			height: auto;
		}

		.nav-for-slider .swiper-slide img {
			border: 2px solid transparent;
			border-radius: 10px;
		}

		.nav-for-slider .swiper-slide-thumb-active img {
			border-color: rgb(79 70 229);
		}
	</style>


	<section class="py-2">
		<div class="mx-auto max-w-7xl px-4 sm:px-3 lg:px-4 ">
			<div
				class="grid grid-cols-1 lg:grid-cols-2 gap-8 mx-auto bg-gray-100 py-5" style="max-width: 1200px; justify-items: space-around;">
				<!-- Image à droite (sur mobile) -->
				<div class="slider-box max-w-full h-full  lg:hidden">
					<div class="swiper main-slide-carousel swiper-container relative mb-6" style="width: 375px; height: 290px;">
						<div class="swiper-wrapper">
							<div class="swiper-slide">
								<div class="block" style="width: 375px; height: 290px;">
<img src="{{ mainPicture | imagine_filter('my_thumb_2') }}" alt="{{ ad.slug }}" class="mx-auto  rounded-lg" style="width: 375px; height: 290px; object-fit: contain; object-position: center center;" loading="lazy">


									<p class="text-center mt-2 text-gray-700">{{ ad.price }}€ -
										{{ ad.mark.name }}</p>
								</div>
							</div>
							{% for image in ad.images %}
								<div class="swiper-slide">
									<div class="block" style="width: 375px; height: 290px;">
										<img src="{{ asset('uploads/ads/' ~ image) | imagine_filter('my_thumb_2') }}" alt="{{ ad.slug }}" class="mx-auto" style="width: 375px; height: 290px; object-fit: cover; object-position: center center;">
										<p class="text-center mt-2 text-gray-700">{{ ad.price }}€ -
											{{ ad.mark.name }}</p>
									</div>
								</div>
							{% endfor %}
						</div>

					</div>
					<div class="relative font-inter antialiased">
						<div class="w-full max-w-2xl mx-auto px-4 md:px-6">
							<div
								class="divide-y divide-slate-200">
								<!-- Accordion item -->
								<div x-data="{ expanded: false }" class="py-2">
									<h2>
										<button id="faqs-title-01" type="button" class="flex items-center justify-center w-full text-left font-semibold py-2" @click="expanded = !expanded" :aria-expanded="expanded" aria-controls="faqs-text-01">
											<span>
												{{ ad.mark.name }}
												{{ ad.title }}
												à
												{{price | number_format(0, '.', ' ') ~ ' €'}}

											</span>
											<svg class="fill-indigo-500 shrink-0 ml-8" width="16" height="16" xmlns="http://www.w3.org/2000/svg">
												<rect y="7" width="16" height="2" rx="1" class="transform origin-center transition duration-200 ease-out" :class="{'!rotate-180': expanded}"/>
												<rect y="7" width="16" height="2" rx="1" class="transform origin-center rotate-90 transition duration-200 ease-out" :class="{'!rotate-180': expanded}"/>
											</svg>
										</button>
									</h2>
									<p>
										Référence :
										{{ad.reference|upper}}
									</p>
									{% if ad.mark.picture  is not null %}
										<img src="{{ asset('uploads/ads/' ~ ad.mark.picture)}}" alt="{{ ad.mark.name }}" class="object-contain rounded-full" style="object-position: center;width: 40px;height: 40px;">
									{% else %}
										<span class="text-sm font-medium text-[#1f2641]">{{ad.mark.name}}</span>
									{% endif %}

									<div id="faqs-text-01" role="region" aria-labelledby="faqs-title-01" class="grid text-sm text-slate-600 overflow-hidden transition-all duration-300 ease-in-out" :class="expanded ? 'grid-rows-[1fr] opacity-100' : 'grid-rows-[0fr] opacity-0'">
										<div class="overflow-hidden">
											<p class="pb-3">
												Année :
												{{ ad.year}}
											</p>
											<p class="pb-3">
												Kilométrage :
												{{ ad.mileage }}
												km
											</p>
											<p class="pb-3">
												Carburant :
												{{ ad.fuel}}
											</p>

										</div>
									</div>
								</div>
							</div>

						</div>


					</div>

				</div>
				<!-- Formulaire à gauche -->
				<div class="pro-detail max-w-[608px] lg:pl-8 xl:pl-16">
					<div class="shadow-xl rounded-md bg-white p-6">
						<strong class="font-bold text-gray-900 text-center">
							<p class="text-2xl">Demande de devis</p>
						</strong>
						<p class="text-sm text-gray-500 mt-4">
							<strong class="text-[#f75842]">NB :</strong>
							Une demande de devis ne vous engage en rien. Elle permettra à notre équipe de vous contacter pour vous fournir plus d'informations sur l'offre et répondre à vos questions.
						</p>

						{{ form_start(form, {'attr': {'class': 'md:col-span-8 px-2 py-10'}}) }}

						<div class="flex flex-wrap -mx-3">
							<div class="w-full md:w-1/2 px-3 md:mb-0">
								<label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="{{ form.firstName.vars.id }}">
									{{ form_label(form.firstName, 'Prénom', {'label_attr': {'class': 'block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2'}}) }}
								</label>
								{{ form_widget(form.firstName, {'attr': {'class': 'appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white', 'placeholder': 'Pierre'}}) }}
								<div class="text-[#f75842]">
									{{ form_errors(form.firstName) }}
								</div>
							</div>
							<div class="w-full md:w-1/2 px-3">
								<label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="{{ form.lastName.vars.id }}">
									{{ form_label(form.lastName, 'Nom', {'label_attr': {'class': 'block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2'}}) }}
								</label>
								{{ form_widget(form.lastName, {'attr': {'class': 'appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500', 'placeholder': 'DELARUE'}}) }}
								<div class="text-[#f75842]">
									{{ form_errors(form.lastName) }}
								</div>
							</div>
						</div>

						<div class="flex flex-wrap -mx-3">
							<div class="w-full px-3">
								<label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="{{ form.tel.vars.id }}">
									{{ form_label(form.tel, 'Tel', {'label_attr': {'class': 'block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2'}}) }}
								</label>
								<div class="flex">
									<select name="{{ form.tel.vars.full_name }}[country_code]" class="appearance-none block w-1/4 bg-gray-200 text-gray-700 border rounded-l py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white">
										{% for country, code in countryCode %}
											<option value="{{ code }}">{{ country }}
												(+{{ code }})</option>
										{% endfor %}
									</select>
									{{ form_widget(form.tel, {'attr': {'class': 'appearance-none block w-3/4 bg-gray-200 text-gray-700 border rounded-r py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white', 'placeholder': '06********'}}) }}
								</div>
								<div class="text-[#f75842]">
									{{ form_errors(form.tel) }}
								</div>
							</div>
						</div>

						<div class="flex flex-wrap -mx-3">
							<div class="w-full px-3">
								<label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="{{ form.email.vars.id }}">
									{{ form_label(form.email, 'Email', {'label_attr': {'class': 'block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2'}}) }}
								</label>
								{{ form_widget(form.email, {'attr': {'class': 'appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500', 'placeholder': '********@*****.**'}}) }}
								<div class="text-[#f75842]">
									{{ form_errors(form.email) }}
								</div>
							</div>
						</div>

<div class="flex flex-wrap -mx-3">
	<div class="w-full px-3">
		
		{{ form_widget(form.address, {'attr': {'class': 'appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500', 'placeholder': 'votre address'}}) }}
		<div class="text-[#f75842]">
			{{ form_errors(form.address) }}
		</div>
	</div>
</div>






						<div class="flex flex-wrap -mx-3 mb-2">
							<div class="w-full px-3">
								<label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="{{ form.message.vars.id }}">
									{{ form_label(form.message, 'Message', {'label_attr': {'class': 'block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2'}}) }}
								</label>
								{{ form_widget(form.message, {'attr': {'class': 'appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-2 leading-tight focus:outline-none focus:bg-white focus:border-gray-500', 'placeholder': 'Demande de devis......'}}) }}
								<div class="text-[#f75842]">
									{{ form_errors(form.message) }}
								</div>
							</div>
							<p class="text-gray-500 text-xs mt-2 mb-2">
								<i class='bx bxs-lock-alt' style='color:green;'></i>
								Nous protégeons vos données selon les normes RGPD.
							</p>

							<div class="flex justify-between w-full px-3">
								<button class="shadow bg-indigo-600 hover:bg-indigo-400 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-6 rounded" type="submit">
									Envoyer
								</button>
								<a href="{{path('app_ad_show',{'slug':ad.slug})}}" class="text-white bg-red-500 hover:bg-red-400 focus:ring-4 focus:ring-cyan-200 border font-medium inline-flex items-center rounded-lg text-base px-3 py-2.5 text-center" data-modal-toggle="delete-user-modal">

									Annuler
								</a>
							</div>

						</div>

						

						{{ form_end(form) }}


					</div>
				</div>
				<!-- Image à droite (sur grand écran) -->
				<div class="slider-box hidden lg:block max-w-full h-full ">
					<div class="swiper main-slide-carousel swiper-container relative mb-6" style="width: 375px; height: 290px;">
						<div class="swiper-wrapper">
							<div class="swiper-slide">
								<div class="block" style="width: 375px; height: 290px;">
									<img src="{{ mainPicture }}" alt="{{ ad.slug }}" class="mx-auto  rounded-lg" style="width: 375px; height: 290px; object-fit: cover; object-position: center center;">

									<p class="text-center mt-2 text-gray-700">{{ ad.price }}€ -
										{{ ad.mark.name }}</p>
								</div>
							</div>

						</div>


					</div>

					<div class="relative font-inter antialiased">
						<div class="w-full max-w-2xl mx-auto px-4 md:px-6">
							<div
								class="divide-y divide-slate-200">
								<!-- Accordion item -->
								<div x-data="{ expanded: false }" class="py-2">
									<h2>
										<button id="faqs-title-01" type="button" class="flex items-center justify-center w-full text-left font-semibold py-2" @click="expanded = !expanded" :aria-expanded="expanded" aria-controls="faqs-text-01">
											<span>
												{{ ad.mark.name }}
												{{ ad.title }}
											</br>
											{{price | number_format(0, '.', ' ') ~ ' €'}}
										</span>
										<svg class="fill-indigo-500 shrink-0 ml-8" width="16" height="16" xmlns="http://www.w3.org/2000/svg">
											<rect y="7" width="16" height="2" rx="1" class="transform origin-center transition duration-200 ease-out" :class="{'!rotate-180': expanded}"/>
											<rect y="7" width="16" height="2" rx="1" class="transform origin-center rotate-90 transition duration-200 ease-out" :class="{'!rotate-180': expanded}"/>
										</svg>
									</button>
								</h2>
								<p class="text-center">

									Référence :
									{{ad.reference|upper}}
								</p>
								{% if ad.mark.picture  is not null %}
									<img src="{{ asset('uploads/ads/' ~ ad.mark.picture)}}" alt="{{ ad.mark.name }}" class="object-contain rounded-full" style="object-position: center;width: 40px;height: 40px;">
								{% else %}
									<span class="text-sm font-medium text-[#1f2641]">{{ad.mark.name}}</span>
								{% endif %}

								<div id="faqs-text-01" role="region" aria-labelledby="faqs-title-01" class="grid text-sm text-slate-600 overflow-hidden transition-all duration-300 ease-in-out" :class="expanded ? 'grid-rows-[1fr] opacity-100' : 'grid-rows-[0fr] opacity-0'">
									<div class="overflow-hidden">
										<p class="pb-3">
											Année :
											{{ ad.year}}
										</p>
										<p class="pb-3">
											Kilométrage :
											{{ ad.mileage }}
											km
										</p>
										<p class="pb-3">
											Carburant :
											{{ ad.fuel}}
										</p>

									</div>
								</div>
							</div>
						</div>

					</div>


				</div>


			</div>
		</div>
	</div>

</section>


<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script>
	document.addEventListener('DOMContentLoaded', function () {
var swiper_thumbs = new Swiper(".nav-for-slider", {
loop: true,
spaceBetween: 30,
slidesPerView: 5
});

var swiper = new Swiper(".main-slide-carousel", {
slidesPerView: 1,
thumbs: {
swiper: swiper_thumbs
},
navigation: {
nextEl: '.swiper-button-next',
prevEl: '.swiper-button-prev'
},
loop: true,
autoplay: {
delay: 5000,
disableOnInteraction: false
}
});


});
</script>{% endblock %}

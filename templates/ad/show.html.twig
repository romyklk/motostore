{% extends 'base.html.twig' %}

{% block title %}
	{{ parent() }}
	-
	{{ ad.title }}
{% endblock %}


{% block body %}

	{% set price = ad.price / 100 %}

	{% set mainPicture = asset('uploads/ads/' ~ ad.mainPicture) %}

	{% set randomNumber = random(41, 50) / 10 %}
	{% set randomNumber = (random(41, 50) / 10)|number_format(1, '.', '') %}


	<div class="mb-1 w-full">
		<div class="bg-white px-4 py-2 shadow-1 dark:border-dark-3 dark:bg-dark-2 dark:shadow-card sm:px-6 md:px-8 md:py-2">
			<ul class="flex items-center">
				<li class="flex items-center">
					<a href="{{path('app_home')}}" class="text-base font-bold text-[#1f2641] hover:text-[#f75842]">
						Accueil
					</a>
					<span class="px-3 text-body-color dark:text-dark-6">
						<svg width="7" height="12" viewbox="0 0 7 12" class="fill-current">
							<path d="M0.879233 11.4351C0.808625 11.4351 0.720364 11.3998 0.667408 11.3469C0.543844 11.2233 0.543844 11.0291 0.649756 10.9056L5.09807 6.17483C5.18633 6.08657 5.18633 5.92771 5.09807 5.82179L0.649756 1.09105C0.526192 0.967487 0.543844 0.773315 0.667408 0.649751C0.790972 0.526187 0.985145 0.543839 1.10871 0.667403L5.55702 5.39815C5.85711 5.73353 5.85711 6.26309 5.55702 6.58083L1.10871 11.3292C1.0381 11.3998 0.967493 11.4351 0.879233 11.4351Z"/>
							<path fill-rule="evenodd" clip-rule="evenodd" d="M0.229332 10.5281L4.48868 5.99831L0.24288 1.48294C-0.133119 1.09849 -0.0312785 0.549591 0.267983 0.25033C0.652758 -0.134445 1.2069 -0.0332381 1.50812 0.267982L1.52041 0.280272L5.9781 5.02138C6.46442 5.56491 6.47872 6.42661 5.96853 6.96778V6.96778L1.50834 11.7289C1.36051 11.8767 1.15353 12 0.879227 12C0.660517 12 0.428074 11.9064 0.267983 11.7463C-0.0719543 11.4064 -0.0699959 10.8773 0.220873 10.538L0.229332 10.5281ZM5.55702 6.58083C5.85711 6.26309 5.85711 5.73353 5.55702 5.39815L1.10871 0.667403C0.985145 0.543839 0.790972 0.526187 0.667408 0.649751C0.543844 0.773315 0.526192 0.967487 0.649756 1.09105L5.09807 5.82179C5.18633 5.92771 5.18633 6.08657 5.09807 6.17483L0.649756 10.9056C0.543844 11.0291 0.543844 11.2233 0.667408 11.3469C0.720364 11.3998 0.808625 11.4351 0.879233 11.4351C0.967493 11.4351 1.0381 11.3998 1.10871 11.3292L5.55702 6.58083Z"/>
						</svg>
					</span>
				</li>
				<li class="flex items-center">
					<a href="{{path('app_ad')}}" class="text-base font-bold text-[#1f2641] hover:text-[#f75842]">

						Annonces
					</a>
					<span class="px-3 text-body-color dark:text-dark-6">
						<svg width="7" height="12" viewbox="0 0 7 12" class="fill-current">
							<path d="M0.879233 11.4351C0.808625 11.4351 0.720364 11.3998 0.667408 11.3469C0.543844 11.2233 0.543844 11.0291 0.649756 10.9056L5.09807 6.17483C5.18633 6.08657 5.18633 5.92771 5.09807 5.82179L0.649756 1.09105C0.526192 0.967487 0.543844 0.773315 0.667408 0.649751C0.790972 0.526187 0.985145 0.543839 1.10871 0.667403L5.55702 5.39815C5.85711 5.73353 5.85711 6.26309 5.55702 6.58083L1.10871 11.3292C1.0381 11.3998 0.967493 11.4351 0.879233 11.4351Z"/>
							<path fill-rule="evenodd" clip-rule="evenodd" d="M0.229332 10.5281L4.48868 5.99831L0.24288 1.48294C-0.133119 1.09849 -0.0312785 0.549591 0.267983 0.25033C0.652758 -0.134445 1.2069 -0.0332381 1.50812 0.267982L1.52041 0.280272L5.9781 5.02138C6.46442 5.56491 6.47872 6.42661 5.96853 6.96778V6.96778L1.50834 11.7289C1.36051 11.8767 1.15353 12 0.879227 12C0.660517 12 0.428074 11.9064 0.267983 11.7463C-0.0719543 11.4064 -0.0699959 10.8773 0.220873 10.538L0.229332 10.5281ZM5.55702 6.58083C5.85711 6.26309 5.85711 5.73353 5.55702 5.39815L1.10871 0.667403C0.985145 0.543839 0.790972 0.526187 0.667408 0.649751C0.543844 0.773315 0.526192 0.967487 0.649756 1.09105L5.09807 5.82179C5.18633 5.92771 5.18633 6.08657 5.09807 6.17483L0.649756 10.9056C0.543844 11.0291 0.543844 11.2233 0.667408 11.3469C0.720364 11.3998 0.808625 11.4351 0.879233 11.4351C0.967493 11.4351 1.0381 11.3998 1.10871 11.3292L5.55702 6.58083Z"/>
						</svg>
					</span>
				</li>

				<li class="flex items-center">
					<a href="{{path('app_mark_show',{'slug':ad.mark.name})}}" class="text-base font-bold text-[#1f2641] hover:text-[#f75842]">


						{{ ad.mark.name }}
					</a>
					<span class="px-3 text-body-color dark:text-dark-6">
						<svg width="7" height="12" viewbox="0 0 7 12" class="fill-current">
							<path d="M0.879233 11.4351C0.808625 11.4351 0.720364 11.3998 0.667408 11.3469C0.543844 11.2233 0.543844 11.0291 0.649756 10.9056L5.09807 6.17483C5.18633 6.08657 5.18633 5.92771 5.09807 5.82179L0.649756 1.09105C0.526192 0.967487 0.543844 0.773315 0.667408 0.649751C0.790972 0.526187 0.985145 0.543839 1.10871 0.667403L5.55702 5.39815C5.85711 5.73353 5.85711 6.26309 5.55702 6.58083L1.10871 11.3292C1.0381 11.3998 0.967493 11.4351 0.879233 11.4351Z"/>
							<path fill-rule="evenodd" clip-rule="evenodd" d="M0.229332 10.5281L4.48868 5.99831L0.24288 1.48294C-0.133119 1.09849 -0.0312785 0.549591 0.267983 0.25033C0.652758 -0.134445 1.2069 -0.0332381 1.50812 0.267982L1.52041 0.280272L5.9781 5.02138C6.46442 5.56491 6.47872 6.42661 5.96853 6.96778V6.96778L1.50834 11.7289C1.36051 11.8767 1.15353 12 0.879227 12C0.660517 12 0.428074 11.9064 0.267983 11.7463C-0.0719543 11.4064 -0.0699959 10.8773 0.220873 10.538L0.229332 10.5281ZM5.55702 6.58083C5.85711 6.26309 5.85711 5.73353 5.55702 5.39815L1.10871 0.667403C0.985145 0.543839 0.790972 0.526187 0.667408 0.649751C0.543844 0.773315 0.526192 0.967487 0.649756 1.09105L5.09807 5.82179C5.18633 5.92771 5.18633 6.08657 5.09807 6.17483L0.649756 10.9056C0.543844 11.0291 0.543844 11.2233 0.667408 11.3469C0.720364 11.3998 0.808625 11.4351 0.879233 11.4351C0.967493 11.4351 1.0381 11.3998 1.10871 11.3292L5.55702 6.58083Z"/>
						</svg>
					</span>
				</li>
				<li class="text-base font-bold text-[#00bf8e] hover:text-[#00bf8e]">


					{{ ad.title }}
				</li>
			</ul>
		</div>
	</div>


	<style>

		.swiper-button-next::after,
		.swiper-button-prev::after {
			font-size: 20px; /* Ajustez la taille de la police ici */
			width: 20px;
			height: 20px;
		}

		.nav-for-slider .swiper-slide {
			height: auto;
			width: auto;
			cursor: pointer;
		}

		.swiper-wrapper {
			height: auto;
		}

		.nav-for-slider .swiper-slide img {
			border: 2px solid transparent;
			border-radius: 10px;
		}

		.nav-for-slider .swiper-slide-thumb-active img {
			border-color: rgb(79 70 229);
		}
	</style>

	<section class="py-2">
		<div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
			<div class="grid grid-cols-1 lg:grid-cols-2">
				<div class="slider-box w-full h-full max-lg:mx-auto mx-0">
					<div class="swiper main-slide-carousel swiper-container relative mb-6">
						<div class="swiper-wrapper">
							<div class="swiper-slide">
								<div class="block">
									<img src="{{mainPicture | imagine_filter('my_thumb_3')}}" alt="{{ad.slug}}" class="max-lg:mx-auto" style="width: 100%; height: 400px;object-fit: cover;aspect-ratio: 16/9;object-position: center center;">

								</div>
							</div>
							{% for image in ad.images %}
								<div class="swiper-slide">
									<div class="block">
										<img src="{{asset('uploads/ads/' ~ image) | imagine_filter('my_thumb_3')}}" alt="{{ad.slug}}" class="max-lg:mx-auto" style="width: 100%; height: 400px;object-fit: contain;aspect-ratio: 16/9;object-position: center center;">

									</div>
								</div>

							{% endfor %}
						</div>
						<!-- Ajout des boutons "Next" et "Previous" -->
						<div class="swiper-button-next"></div>
						<div class="swiper-button-prev"></div>
					</div>
					<div class="nav-for-slider " style="display: none;">
						<div class="swiper-wrapper">
							{% for image in ad.images %}
								<div class="swiper-slide thumbs-slide">
									<img src="{{asset('uploads/ads/' ~ image)}}" alt="{{ad.slug}}" class="cursor-pointer rounded-xl transition-all duration-500 ">

								</div>
							{% endfor %}
						</div>
					</div>
				</div>
				<div class="flex justify-center items-center">
					<div class="pro-detail w-full max-lg:max-w-[608px] lg:pl-8 xl:pl-16 max-lg:mx-auto max-lg:mt-8">
						<div class="flex items-center justify-between gap-6 mb-6">
							<div class="text">
								<h2 class="font-manrope font-bold text-3xl leading-10 text-gray-900 mb-2 text-center">{{ ad.title }}
								</h2>
								{% if ad.mark.picture  is not null %}
									<img src="{{ asset('uploads/ads/' ~ ad.mark.picture)}}" alt="{{ ad.mark.name }}" class="object-contain rounded-full" style="object-position: center;width: 40px;height: 40px;">
								{% else %}
									<span class="text-sm font-medium text-[#1f2641]">{{ad.mark.name}}</span>
								{% endif %}

							</div>
							<a href="{{ siteSettings.fbLink }}" type="button" target="_blank" class="bg-blue-500 text-[#fff]" style="width: 30px;height: 30px;border-radius: 50%;">


								<i class='bx bxl-facebook text-lg  hover:bg-white hover:text-blue-500' title="Voir l'annonce sur Facebook"></i>
							</a>
						</div>

						<div class="flex flex-col min-[400px]:flex-row min-[400px]:items-center mb-8 gap-y-3">
							<div class="flex items-center">
								<h5 class="font-manrope font-semibold text-2xl leading-9 text-gray-900 ">{{price | number_format(0, '.', ' ') ~ ' â‚¬'}}

								</h5>

							</div>
							<svg class="mx-5 max-[400px]:hidden" xmlns="http://www.w3.org/2000/svg" width="2" height="36" viewbox="0 0 2 36" fill="none">
								<path d="M1 0V36" stroke="#E5E7EB"/>
							</svg>
							<button class="flex items-center gap-1 rounded-lg bg-amber-400 py-1.5 px-2.5 w-max">
								<svg width="18" height="18" viewbox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
									<g clip-path="url(#clip0_12657_16865)">
										<path d="M8.10326 2.26718C8.47008 1.52393 9.52992 1.52394 9.89674 2.26718L11.4124 5.33818C11.558 5.63332 11.8396 5.83789 12.1653 5.88522L15.5543 6.37768C16.3746 6.49686 16.7021 7.50483 16.1086 8.08337L13.6562 10.4738C13.4205 10.7035 13.313 11.0345 13.3686 11.3589L13.9475 14.7343C14.0877 15.5512 13.2302 16.1742 12.4966 15.7885L9.46534 14.1948C9.17402 14.0417 8.82598 14.0417 8.53466 14.1948L5.5034 15.7885C4.76978 16.1742 3.91235 15.5512 4.05246 14.7343L4.63137 11.3589C4.68701 11.0345 4.57946 10.7035 4.34378 10.4738L1.89144 8.08337C1.29792 7.50483 1.62543 6.49686 2.44565 6.37768L5.8347 5.88522C6.16041 5.83789 6.44197 5.63332 6.58764 5.33818L8.10326 2.26718Z" fill="white"/>
										<g clip-path="url(#clip1_12657_16865)">
											<path d="M8.10326 2.26718C8.47008 1.52393 9.52992 1.52394 9.89674 2.26718L11.4124 5.33818C11.558 5.63332 11.8396 5.83789 12.1653 5.88522L15.5543 6.37768C16.3746 6.49686 16.7021 7.50483 16.1086 8.08337L13.6562 10.4738C13.4205 10.7035 13.313 11.0345 13.3686 11.3589L13.9475 14.7343C14.0877 15.5512 13.2302 16.1742 12.4966 15.7885L9.46534 14.1948C9.17402 14.0417 8.82598 14.0417 8.53466 14.1948L5.5034 15.7885C4.76978 16.1742 3.91235 15.5512 4.05246 14.7343L4.63137 11.3589C4.68701 11.0345 4.57946 10.7035 4.34378 10.4738L1.89144 8.08337C1.29792 7.50483 1.62543 6.49686 2.44565 6.37768L5.8347 5.88522C6.16041 5.83789 6.44197 5.63332 6.58764 5.33818L8.10326 2.26718Z" fill="white"/>
										</g>
									</g>
									<defs>
										<clipPath id="clip0_12657_16865">
											<rect width="18" height="18" fill="white"/>
										</clipPath>
										<clipPath id="clip1_12657_16865">
											<rect width="18" height="18" fill="white"/>
										</clipPath>
									</defs>
								</svg>
								<span class="text-base font-medium text-white">{{randomNumber}}</span>

							</button>
						</div>


						<p>
							<strong>Marque:</strong>
							{{ ad.mark }}
						</p>
						<p>
							<strong>AnnÃ©e:</strong>
							{{ ad.year }}
						</p>
						<p>
							<strong>KilomÃ©trage:</strong>
							{{ad.mileage | number_format(0, '.', ' ') ~ ' Kms'}}
						</p>
						{% if ad.cylindre is not null %}
							<p>
								<strong>CylindrÃ©e:</strong>
								{{ad.cylindre}}
								cm3
							</p>

						{% endif %}
						<p>
							<strong>Carburant:</strong>
							{{ ad.fuel }}
						</p>
						{% if ad.puissance is not null %}
							<p>
								<strong>Puisance:</strong>
								{{ad.puissance}}
								ch
							</p>

						{% endif %}


						{% if ad.reserved %}
							<div class="flex flex-wrap gap-4 mt-10">
								<h6 class="text-[#f75842] text-xl font-bold">
									Annonce rÃ©servÃ©e
								</h6>
								<a href="{{ siteSettings.whatsappLink }}" target="_blank" class="inline-flex items-center justify-center flex-1 h-10 gap-2 px-5 text-sm font-medium tracking-wide transition duration-300 rounded focus-visible:outline-none justify-self-center whitespace-nowrap bg-emerald-50 text-emerald-500 hover:bg-emerald-100 hover:text-emerald-600 focus:bg-emerald-200 focus:text-emerald-700 disabled:cursor-not-allowed disabled:border-emerald-300 disabled:bg-emerald-100 disabled:text-emerald-400 disabled:shadow-none">

									<span class="order-2">Discuter avec un conseiller</span>
									<span class="relative only:-mx-5">
										<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" style="fill: #25D366;transform: ;msFilter:;">
											<path fill-rule="evenodd" clip-rule="evenodd" d="M18.403 5.633A8.919 8.919 0 0 0 12.053 3c-4.948 0-8.976 4.027-8.978 8.977 0 1.582.413 3.126 1.198 4.488L3 21.116l4.759-1.249a8.981 8.981 0 0 0 4.29 1.093h.004c4.947 0 8.975-4.027 8.977-8.977a8.926 8.926 0 0 0-2.627-6.35m-6.35 13.812h-.003a7.446 7.446 0 0 1-3.798-1.041l-.272-.162-2.824.741.753-2.753-.177-.282a7.448 7.448 0 0 1-1.141-3.971c.002-4.114 3.349-7.461 7.465-7.461a7.413 7.413 0 0 1 5.275 2.188 7.42 7.42 0 0 1 2.183 5.279c-.002 4.114-3.349 7.462-7.461 7.462m4.093-5.589c-.225-.113-1.327-.655-1.533-.73-.205-.075-.354-.112-.504.112s-.58.729-.711.879-.262.168-.486.056-.947-.349-1.804-1.113c-.667-.595-1.117-1.329-1.248-1.554s-.014-.346.099-.458c.101-.1.224-.262.336-.393.112-.131.149-.224.224-.374s.038-.281-.019-.393c-.056-.113-.505-1.217-.692-1.666-.181-.435-.366-.377-.504-.383a9.65 9.65 0 0 0-.429-.008.826.826 0 0 0-.599.28c-.206.225-.785.767-.785 1.871s.804 2.171.916 2.321c.112.15 1.582 2.415 3.832 3.387.536.231.954.369 1.279.473.537.171 1.026.146 1.413.089.431-.064 1.327-.542 1.514-1.066.187-.524.187-.973.131-1.067-.056-.094-.207-.151-.43-.263"></path>
										</svg>
									</span>
								</a>
							</div>
						{% else %}
							<div class="flex flex-wrap gap-4 mt-10">
								<a href="{{path('app_ad_devis',{'slug':ad.slug})}}" type="button" class="min-w-[200px] px-4 py-3 bg-[#00bf8e] hover:bg-[#1f2641] text-white text-sm font-bold rounded">


									<i class='bx bxs-envelope'></i>
									Demander un devis
								</a>
								<a href="tel:0988776655" type="button" class="min-w-[200px] px-4 py-2.5 border border-[#333] bg-[#1f2641] hover:bg-[#f75842] text-[#fff] text-sm font-bold rounded">
									<i class='bx bxs-phone-call'></i>
									Nous joindre
								</a>
								<a href="{{ siteSettings.whatsappLink }}" target="_blank" class="inline-flex items-center justify-center flex-1 h-10 gap-2 px-5 text-sm font-medium tracking-wide transition duration-300 rounded focus-visible:outline-none justify-self-center whitespace-nowrap bg-emerald-50 text-emerald-500 hover:bg-emerald-100 hover:text-emerald-600 focus:bg-emerald-200 focus:text-emerald-700 disabled:cursor-not-allowed disabled:border-emerald-300 disabled:bg-emerald-100 disabled:text-emerald-400 disabled:shadow-none">

									<span class="order-2">Discuter avec un conseiller</span>
									<span class="relative only:-mx-5">
										<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" style="fill: #25D366;transform: ;msFilter:;">
											<path fill-rule="evenodd" clip-rule="evenodd" d="M18.403 5.633A8.919 8.919 0 0 0 12.053 3c-4.948 0-8.976 4.027-8.978 8.977 0 1.582.413 3.126 1.198 4.488L3 21.116l4.759-1.249a8.981 8.981 0 0 0 4.29 1.093h.004c4.947 0 8.975-4.027 8.977-8.977a8.926 8.926 0 0 0-2.627-6.35m-6.35 13.812h-.003a7.446 7.446 0 0 1-3.798-1.041l-.272-.162-2.824.741.753-2.753-.177-.282a7.448 7.448 0 0 1-1.141-3.971c.002-4.114 3.349-7.461 7.465-7.461a7.413 7.413 0 0 1 5.275 2.188 7.42 7.42 0 0 1 2.183 5.279c-.002 4.114-3.349 7.462-7.461 7.462m4.093-5.589c-.225-.113-1.327-.655-1.533-.73-.205-.075-.354-.112-.504.112s-.58.729-.711.879-.262.168-.486.056-.947-.349-1.804-1.113c-.667-.595-1.117-1.329-1.248-1.554s-.014-.346.099-.458c.101-.1.224-.262.336-.393.112-.131.149-.224.224-.374s.038-.281-.019-.393c-.056-.113-.505-1.217-.692-1.666-.181-.435-.366-.377-.504-.383a9.65 9.65 0 0 0-.429-.008.826.826 0 0 0-.599.28c-.206.225-.785.767-.785 1.871s.804 2.171.916 2.321c.112.15 1.582 2.415 3.832 3.387.536.231.954.369 1.279.473.537.171 1.026.146 1.413.089.431-.064 1.327-.542 1.514-1.066.187-.524.187-.973.131-1.067-.056-.094-.207-.151-.43-.263"></path>
										</svg>
									</span>
								</a>
							</div>
						{% endif %}

					</div>
				</div>
			</div>
		</div>
		<div class="mt-16 shadow-[0_2px_10px_-3px_rgba(6,81,237,0.3)] p-6">
			<h3 class="text-lg font-bold text-[#333]">
				Description
			</h3>
			<p class="mt-6 text-[#333]">
				{{ ad.description | raw }}
			</p>
		</div>

	</section>


	{#  Related products  slider  #}

	<section class="bg-white mt-16">
		<div class="p-6 lg:max-w-7xl max-w-4xl mx-auto">
			<h3 class="text-lg font-bold text-[#333]">Produits similaires</h3>
			<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6">
				{% for ad in ads %}
					{% set adPrice = ad.price / 100 %}
					<a href="{{ path('app_ad_show', {'slug': ad.slug}) }}" class="hover:shadow-[0_2px_10px_-3px_rgba(6,81,237,0.3)]">
						<div class="rounded-xl shadow-[0_2px_10px_-3px_rgba(6,81,237,0.3)]">
							<img src="{{asset('uploads/ads/' ~ ad.mainPicture)}}" alt="Product" class="w-full h-48 object-cover"/>


							<div class="p-4">
								<h4 class="text-[#333] font-bold">
									{{ ad.title }}
								</h4>
								<p class="text-[#333] mt-2">
									{{adPrice | number_format(0, '.', ' ') ~ ' â‚¬'}}

								</p>
							</div>
						</div>
					</a>

				{% endfor %}


			</div>
		</div>
	</section>


	<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
	<script>
		document.addEventListener('DOMContentLoaded', function () {
var swiper_thumbs = new Swiper(".nav-for-slider", {
loop: true,
spaceBetween: 30,
slidesPerView: 5
});

var swiper = new Swiper(".main-slide-carousel", {
slidesPerView: 1,
thumbs: {
swiper: swiper_thumbs
},
navigation: {
nextEl: '.swiper-button-next',
prevEl: '.swiper-button-prev'
},
loop: true,
autoplay: {
delay: 5000,
disableOnInteraction: false
}
});


window.openModal = function (modalId) {
document.getElementById(modalId).style.display = 'block';
document.getElementsByTagName('body')[0].classList.add('overflow-y-hidden');
};

window.closeModal = function (modalId) {
document.getElementById(modalId).style.display = 'none';
document.getElementsByTagName('body')[0].classList.remove('overflow-y-hidden');
};

// Close all modals when press ESC
document.onkeydown = function (event) {
event = event || window.event;
if (event.keyCode === 27) {
document.getElementsByTagName('body')[0].classList.remove('overflow-y-hidden');
let modals = document.getElementsByClassName('modal');
Array.prototype.slice.call(modals).forEach(i => {
i.style.display = 'none';
});
}
};
});
	</script>

{% endblock %}
